<metal:block metal:use-macro="context/@@layout/macros/page">
<div metal:fill-slot='content'>
<tal:block metal:define-macro="next-previous">
  <a tal:condition="view/showPrevious"
     tal:attributes="href python:'%s?s=%s' % (view.url(), view.previousCenter)">Previous 24 hours</a>
  <span tal:condition="python:view.showPrevious == False" title="There are no more earlier events.">Previous 24 hours</span>
  <a tal:condition="view/showNext"
     tal:attributes="href python:'%s?s=%s' % (view.url(), view.nextCenter)">Next 24 hours</a>
  <span tal:condition="python:view.showNext == False" title="There are no more further events.">Next 24 hours</span>
</tal:block>

<div tal:repeat="event view/events"
     tal:define="global lastStart python:None">
<h1 tal:condition="python:lastStart!=event.start.day"
    tal:content="python:event.start.strftime('%A')">Dayname</h1>

<a id="now"
   tal:condition="python: event == view.anchorEvent"></a>
  <tal:block metal:define-macro="eventContainer">
    <span tal:condition="python: event.start <= view.now and view.now < event.end"
          tal:replace="structure python: '<div class=\'now\'>'" />
    <span tal:replace="python:event.start.strftime('%H:%M')" />
    <a tal:content="event/shortname"
       tal:attributes="href event/shorturl">Event name</a>

    <tal:block tal:condition="python: event.length > view.zeroSeconds">
      (<span tal:replace="event/timeString" />)
    </tal:block>

    <a class="loc"
       tal:content="event/locationName"
       tal:attributes="href event/locationUrl">Location name</a>
    <span tal:condition="python: event.start <= view.now and view.now < event.end"
          tal:replace="structure python: '</div>'" />

  </tal:block>
<tal:block tal:condition="python: event == view.anchorEvent">
<div>
  <span tal:content="python: view.now.strftime('Current time: %H:%M')"
        class="loc">Current time</span>
</div>
</tal:block>

<span tal:condition="python: False"
      tal:define="global lastStart python:event.start.day" />
</div>

<tal:block metal:use-macro="view/macros/next-previous">
</tal:block>
</div>
</metal:block >
