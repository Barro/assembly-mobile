<metal:block metal:use-macro="context/@@layout/macros/page">
<div metal:fill-slot='content'>
<h2 tal:content="context/name">name</h2>
<a tal:attributes="href python:view.url('events.ics')">iCal (events)</a> &#8226;
<a tal:condition="context/url"
   tal:attributes="href context/url">View on Assembly.org</a>
<tal:block tal:condition="context/description">
<h2>Description:</h2>
<p tal:content="context/description">description</p>
</tal:block>

<tal:block tal:repeat="event view/events"
     tal:define="global lastStart python:None">
     
     <span tal:replace="structure python: '</div>'"
      tal:condition="python:lastStart is not None and lastStart!=event.start.day" />

<h2 tal:condition="python:lastStart!=event.start.day"
    tal:content="python:event.start.strftime('%A')">Dayname</h2>
    <span tal:replace="structure python: '<div class=\'event\'>'"
      tal:condition="python:lastStart!=event.start.day" />
<div>
    <span tal:replace="python:event.start.strftime('%H:%M')" />
    <a tal:content="event/name"
       tal:attributes="href event/url">Event name</a>

    <tal:block tal:condition="python: event.length > view.zeroSeconds">
      (<span tal:replace="event/timeString" />)
    </tal:block>
</div>


<span tal:condition="python: False"
      tal:define="global lastStart python:event.start.day" />
</tal:block>

<span tal:replace="structure python: '</div>'" />

</div>
</metal:block >
